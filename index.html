<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Portal Akademik - Studi Nahwu</title>
    <style>
        :root { 
            --primary: #1a3a5f; 
            --accent: #007aff; 
            --bg: #f0f2f5; 
            --wa-bg: #e5ddd5; 
            --shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        * { box-sizing: border-box; }

        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; 
            background: var(--bg); 
            margin: 0; 
            color: #1c1e21; 
        }

        /* Layout Utama Responsive */
        header { 
            background: var(--primary); 
            color: white; 
            padding: 12px 20px; 
            box-shadow: 0 2px 8px rgba(0,0,0,0.2); 
            display: flex; 
            align-items: center; 
            justify-content: space-between; 
            position: sticky; 
            top: 0; 
            z-index: 100; 
        }

        header h1 { font-size: 1.1rem; margin: 0; font-weight: 600; }

        .container { 
            max-width: 900px; 
            margin: 20px auto; 
            background: white; 
            padding: 30px; 
            border-radius: 12px; 
            box-shadow: var(--shadow); 
        }

        .article-content { 
            line-height: 1.7; 
            font-family: 'Georgia', serif; 
            font-size: 1.1rem; 
            color: #333; 
        }
        .article-content h2 { color: var(--primary); border-left: 4px solid var(--accent); padding-left: 15px; margin-bottom: 20px; }

        #login-area { margin-top: 30px; padding-top: 20px; border-top: 1px solid #ebedf0; text-align: center; }
        .input-akademik { 
            width: 100%; 
            max-width: 350px; 
            padding: 12px 16px; 
            border: 1px solid #dddfe2; 
            border-radius: 8px; 
            font-size: 1rem; 
            outline: none; 
            transition: 0.2s; 
        }
        .btn-akademik { 
            background: var(--primary); 
            color: white; 
            border: none; 
            padding: 12px 24px; 
            border-radius: 8px; 
            cursor: pointer; 
            font-weight: 600; 
            margin-top: 10px;
        }

        .hidden-chat { 
            display: none; 
            position: fixed; 
            inset: 0; 
            background: var(--wa-bg); 
            z-index: 10000; 
            flex-direction: column; 
        }
        
        #chat-header { 
            background: var(--primary); 
            color: white; 
            padding: 10px 15px; 
            font-weight: 600; 
            display: flex; 
            align-items: center; 
            gap: 12px;
            font-size: 0.95rem;
        }

        #msg-container { 
            flex: 1; 
            overflow-y: auto; 
            padding: 15px; 
            display: flex; 
            flex-direction: column; 
            gap: 6px; 
            background-image: url('https://user-images.githubusercontent.com/15075759/28719144-86dc0f70-73b1-11e7-911d-60d70fcded21.png');
            background-blend-mode: overlay;
            scroll-behavior: smooth;
        }

        .bubble { 
            padding: 8px 12px; 
            border-radius: 10px; 
            max-width: 75%; 
            font-size: 0.95rem; 
            position: relative; 
            box-shadow: 0 1px 2px rgba(0,0,0,0.15); 
            word-wrap: break-word;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .me { align-self: flex-end; background: #dcf8c6; border-top-right-radius: 2px; }
        .them { align-self: flex-start; background: #fff; border-top-left-radius: 2px; }
        
        /* Indikator Status Kirim */
        .status-icon {
            font-size: 0.7rem;
            margin-left: 5px;
            color: #888;
            float: right;
            margin-top: 5px;
        }

        .sending { opacity: 0.7; }
        .sending .status-icon::after { content: "üïí"; animation: blink 1s infinite; }

        @keyframes blink { 50% { opacity: 0.3; } }

        .sender-info { font-size: 0.75rem; font-weight: bold; color: #075e54; margin-bottom: 2px; display: block; }
        
        .img-msg { 
            max-width: 100%; 
            max-height: 300px; 
            border-radius: 6px; 
            margin-top: 5px; 
            display: block;
            object-fit: contain;
            background: #eee;
        }

        #context-menu { 
            display: none; 
            position: fixed; 
            background: white; 
            border-radius: 10px; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.15); 
            z-index: 30000; 
            width: 160px;
            overflow: hidden;
        }
        .menu-item { padding: 12px 16px; font-size: 0.9rem; cursor: pointer; display: flex; align-items: center; gap: 10px; }
        .menu-item:hover { background: #f0f2f5; }
        .menu-item.delete { color: #e41e3f; }

        #bottom-bar { padding: 8px 12px; background: #f0f2f5; display: flex; gap: 8px; align-items: center; }
        #text-input { 
            flex: 1; 
            padding: 10px 16px; 
            border-radius: 20px; 
            border: 1px solid #ddd; 
            outline: none; 
            font-size: 1rem; 
        }
        .btn-send { 
            background: #075e54; 
            color: white; 
            border: none; 
            width: 40px; 
            height: 40px; 
            border-radius: 50%; 
            cursor: pointer; 
            display: flex; 
            align-items: center; 
            justify-content: center;
            font-size: 1.2rem;
            transition: 0.2s;
        }
        .btn-send:active { transform: scale(0.9); }

        #name-modal { 
            display: none; 
            position: fixed; 
            inset: 0; 
            background: rgba(255,255,255,0.8); 
            backdrop-filter: blur(8px); 
            z-index: 20000; 
            align-items: center; 
            justify-content: center; 
        }
        .modal-box { 
            background: white; 
            padding: 30px; 
            border-radius: 16px; 
            text-align: center; 
            width: 90%; 
            max-width: 400px; 
            box-shadow: 0 8px 30px rgba(0,0,0,0.1); 
        }

        @media (max-width: 600px) {
            .container { margin: 0; border-radius: 0; padding: 20px; }
            .bubble { max-width: 85%; }
            .img-msg { max-height: 200px; }
        }
    </style>
</head>
<body>

    <header>
        <h1>SIAKAD - Studi Bahasa Arab</h1>
        <div style="font-size: 11px; font-weight: 500; opacity: 0.8;">Ruang Diskusi Nahwu</div>
    </header>

    <div id="decoy-content" class="container">
        <div class="article-content">
            <h2>Analisis Sintaksis Isim Tasniyah</h2>
            <p>Ilmu nahwu merupakan disiplin utama dalam kajian bahasa Arab yang membahas sistem sintaksis (an-nizham an-nahwi) serta perubahan akhir kata (al-i‚Äòrab) berdasarkan fungsi gramatikalnya dalam struktur kalimat. Dalam konteks akademik, nahwu tidak lagi dipahami sebatas kumpulan kaidah normatif, tetapi sebagai sistem analisis linguistik yang memiliki landasan epistemologis, metodologis, dan historis yang kuat.
Kodifikasi ilmu nahwu secara sistematis mencapai puncaknya melalui karya monumental Imam Sibawaih dalam Al-Kitab. Karya tersebut menjadi fondasi utama madrasah Bashrah dalam merumuskan prinsip-prinsip gramatika Arab. Perkembangan berikutnya memperlihatkan dinamika intelektual antara mazhab Bashrah dan Kufah dalam menjelaskan fenomena kebahasaan Arab, terutama terkait konsep ‚Äòamil (unsur pengaruh gramatikal), qiyas (analogi), dan sima‚Äò (transmisi otoritatif dari penutur Arab asli). Seluruh upaya ini bertujuan menjaga kemurnian bahasa Arab, khususnya dalam memahami Al-Qur'an sebagai sumber utama ajaran Islam.
________________________________________
LANDASAN EPISTEMOLOGIS ILMU NAHWU
Dalam perkuliahan ini, mahasiswa diajak memahami bahwa nahwu berdiri di atas beberapa landasan epistemologis:
1.	As-Sima‚Äò (ÿßŸÑÿ≥ŸÖÿßÿπ)
Data kebahasaan yang diriwayatkan dari penutur Arab fasih (Arab badui) dan teks otoritatif.
2.	Al-Qiyas (ÿßŸÑŸÇŸäÿßÿ≥)
Penalaran analogis untuk menetapkan hukum terhadap bentuk-bentuk baru berdasarkan pola yang telah ditetapkan.
3.	Al-‚ÄòIllah (ÿßŸÑÿπŸÑÿ© ÿßŸÑŸÜÿ≠ŸàŸäÿ©)
Rasionalisasi atau sebab gramatikal yang menjelaskan mengapa suatu hukum berlaku.
4.	Al-Ijma‚Äò (ÿßŸÑÿ•ÿ¨ŸÖÿßÿπ)
Kesepakatan ulama bahasa terhadap suatu kaidah tertentu.
Mahasiswa tidak hanya mempelajari hasil akhir berupa kaidah, tetapi juga memahami proses penalaran yang melatarbelakanginya.
________________________________________
RUANG LINGKUP DAN STRUKTUR MATERI PERKULIAHAN
1. Teori Dasar dan Konsep Fundamental
A. Pembagian Kalimat (Al-Kalam)
‚Ä¢	Isim: ciri-ciri dan tanda-tandanya
‚Ä¢	Fi‚Äòil: madhi, mudhari‚Äô, amr
‚Ä¢	Huruf: fungsi dan ragamnya
B. I‚Äòrab dan Bina‚Äô
‚Ä¢	Pengertian i‚Äòrab secara bahasa dan istilah
‚Ä¢	Macam-macam i‚Äòrab (rafa‚Äò, nashab, jar, jazm)
‚Ä¢	I‚Äòrab zhahir, taqdiri, dan mahalli
‚Ä¢	Mabni dan jenis-jenisnya
C. Teori ‚ÄòAmil dan Ma‚Äòmul
Mahasiswa memahami bahwa perubahan akhir kata terjadi karena adanya ‚Äòamil (faktor pengaruh gramatikal).
Kajian meliputi:
‚Ä¢	‚ÄòAmil lafzhi dan ma‚Äònawi
‚Ä¢	Klasifikasi ‚Äòamil menurut ulama Bashrah dan Kufah
‚Ä¢	Kritik terhadap teori ‚Äòamil dalam perspektif linguistik modern
________________________________________
2. Struktur Jumlah (Sintaksis Kalimat)
A. Jumlah Ismiyyah
‚Ä¢	Mubtada‚Äô dan khabar
‚Ä¢	Variasi khabar (mufrad, jumlah, syibhul jumlah)
‚Ä¢	Masalah taqdim‚Äìta‚Äôkhir
B. Jumlah Fi‚Äòliyyah
‚Ä¢	Fi‚Äòil dan fa‚Äòil
‚Ä¢	Naibul fa‚Äòil
‚Ä¢	Maf‚Äòul bih dan jenis-jenisnya
‚Ä¢	Maf‚Äòul mutlaq, maf‚Äòul li ajlih, maf‚Äòul ma‚Äòah, maf‚Äòul fih
C. Pelengkap dan Pengikut (At-Tawabi‚Äò)
‚Ä¢	Na‚Äòt
‚Ä¢	‚ÄòAthaf
‚Ä¢	Taukid
‚Ä¢	Badal
Mahasiswa dilatih melakukan analisis struktur kalimat kompleks, termasuk jumlah mu‚Äòtaridhah dan...
</p>
        </div>
        <div id="login-area">
            <input type="password" id="hidden-trigger" class="input-akademik" placeholder="Masukkan Kode Otentikasi">
            <br>
            <button class="btn-akademik" onclick="checkPassManual()">Buka Akses Materi</button>
        </div>
    </div>

    <div id="context-menu">
        <div class="menu-item" onclick="triggerEdit()">‚úèÔ∏è Edit Pesan</div>
        <div class="menu-item delete" onclick="triggerDelete()">üóëÔ∏è Tarik Pesan</div>
    </div>

    <div id="name-modal">
        <div class="modal-box">
            <h3 style="margin-top:0">Verifikasi Mahasiswa</h3>
            <p style="color: #65676b; font-size: 0.9rem;">Nama Anda akan tercatat dalam sistem diskusi kelas.</p>
            <input type="text" id="user-name-input" class="input-akademik" placeholder="Nama Lengkap Sesuai KTM">
            <button class="btn-akademik" style="width:100%; margin-top:20px;" onclick="saveNameAndStart()">Masuk ke Ruang Diskusi</button>
        </div>
    </div>

    <div id="secret-chat" class="hidden-chat">
        <div id="chat-header">
            <span style="background: #25d366; width: 10px; height: 10px; border-radius: 50%;"></span>
            Ruang Diskusi Kelas
        </div>
        <div id="msg-container" onclick="closeMenu()"></div>
        <div id="bottom-bar">
            <input type="file" id="fileInp" hidden onchange="uploadPhoto()">
            <button onclick="document.getElementById('fileInp').click()" style="border:none; background:none; font-size:24px; cursor:pointer;">üìé</button>
            <input type="text" id="text-input" placeholder="Ketik pesan..." autocomplete="off">
            <button class="btn-send" onclick="sendMsg()">‚û§</button>
        </div>
    </div>

    <script>
        const API_URL = "https://script.google.com/macros/s/AKfycbzQbIjPkfvKlIq-cet6yTPA7gIf1Yv3WjBRFSfb5Xys_P3RwxVH-ktZ2p249iDEjZRe2A/exec"; 
        const SECRET = "21191108";
        let myName = "";
        let selectedMsgId = null;
        let isEditing = false;
        let pendingMessages = []; // Menyimpan pesan yang sedang proses kirim

        function checkPassManual() {
            if (document.getElementById('hidden-trigger').value === SECRET) {
                document.getElementById('name-modal').style.display = 'flex';
            } else { alert("Kode Salah."); }
        }

        function saveNameAndStart() {
            const n = document.getElementById('user-name-input').value;
            if (n.trim()) {
                myName = n;
                document.getElementById('name-modal').style.display = 'none';
                document.getElementById('decoy-content').style.display = 'none';
                document.getElementById('secret-chat').style.display = 'flex';
                fetchData();
                setInterval(fetchData, 4000);
            }
        }

        function renderMessages(serverData) {
            const container = document.getElementById('msg-container');
            const isAtBottom = container.scrollHeight - container.scrollTop <= container.clientHeight + 100;
            
            container.innerHTML = "";
            
            // Gabungkan data server dengan pesan yang sedang dikirim (Optimistic UI)
            const allMessages = [...serverData];
            
            allMessages.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = `bubble ${item.nama === myName ? 'me' : 'them'}`;
                
                if(item.nama === myName) {
                    div.onclick = (e) => showMenu(e, index);
                }

                const content = item.pesan.startsWith("data:image") 
                    ? `<img src="${item.pesan}" class="img-msg" loading="lazy">` 
                    : item.pesan;
                    
                div.innerHTML = `<span class="sender-info">${item.nama}</span>${content}`;
                container.appendChild(div);
            });

            // Tampilkan pesan pending (Animasi Mengirim)
            pendingMessages.forEach(msg => {
                const div = document.createElement('div');
                div.className = `bubble me sending`;
                const content = msg.pesan.startsWith("data:image") 
                    ? `<img src="${msg.pesan}" class="img-msg">` 
                    : msg.pesan;
                div.innerHTML = `<span class="sender-info">${myName}</span>${content}<span class="status-icon"></span>`;
                container.appendChild(div);
            });
            
            if (isAtBottom) container.scrollTop = container.scrollHeight;
        }

        async function fetchData() {
            try {
                const res = await fetch(API_URL);
                const raw = await res.json();
                const serverData = raw.map(d => ({ nama: d[0], pesan: d[1] }));
                
                // Jika pesan sudah ada di server, hapus dari list pending
                pendingMessages = pendingMessages.filter(p => 
                    !serverData.some(s => s.nama === myName && s.pesan === p.pesan)
                );

                renderMessages(serverData);
            } catch (e) {}
        }

        function showMenu(e, id) {
            e.stopPropagation();
            selectedMsgId = id;
            const menu = document.getElementById('context-menu');
            menu.style.display = 'block';
            menu.style.left = Math.min(e.pageX, window.innerWidth - 170) + 'px';
            menu.style.top = e.pageY + 'px';
        }

        function closeMenu() { document.getElementById('context-menu').style.display = 'none'; }

        async function triggerDelete() {
            if(!confirm("Hapus pesan ini?")) return;
            await post("__DELETE__", selectedMsgId);
            closeMenu();
        }

        function triggerEdit() {
            const container = document.getElementById('msg-container');
            const currentText = container.children[selectedMsgId].childNodes[1].textContent;
            document.getElementById('text-input').value = currentText;
            document.getElementById('text-input').focus();
            isEditing = true;
            closeMenu();
        }

        async function post(val, editIdx = null) {
            const msgObj = { nama: myName, pesan: val };
            
            // Jika kirim pesan baru (bukan edit/hapus), tambahkan ke pending untuk animasi
            if (editIdx === null && val !== "__DELETE__") {
                pendingMessages.push(msgObj);
                renderMessages([]); // Re-render instan
            }

            const payload = { 
                nama: myName, 
                pesan: val, 
                index: editIdx, 
                action: editIdx !== null ? "edit" : "send" 
            };

            try {
                await fetch(API_URL, { method: "POST", body: JSON.stringify(payload) });
                fetchData();
            } catch (e) { 
                alert("Gagal mengirim. Periksa koneksi.");
                pendingMessages = [];
                fetchData();
            }
        }

        function sendMsg() {
            const input = document.getElementById('text-input');
            if (input.value.trim()) {
                post(input.value, isEditing ? selectedMsgId : null);
                input.value = "";
                isEditing = false;
            }
        }

        function uploadPhoto() {
            const file = document.getElementById('fileInp').files[0];
            if(!file) return;
            if(file.size > 1024 * 1024) { alert("File terlalu besar (Maks 1MB)"); return; }
            
            const reader = new FileReader();
            reader.onloadend = () => post(reader.result);
            reader.readAsDataURL(file);
        }

        document.getElementById('text-input').addEventListener('keypress', (e) => { 
            if (e.key === 'Enter') sendMsg(); 
        });
    </script>
</body>
</html>
